<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wi-Fi Premium - Pagamento</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            background-color: #000; 
            padding: 20px; 
            color: #fff; 
        }
        .container { 
            width: 100%; 
            max-width: 600px; 
            margin: 0 auto; 
            background: #111; 
            padding: 25px; 
            border-radius: 10px; 
            border: 3px solid yellow; 
        }
        h2, h3 { 
            color: yellow; 
            margin-bottom: 20px; 
        }
        .btn { 
            background-color: yellow; 
            color: black; 
            padding: 14px; 
            border: none; 
            width: 100%; 
            margin-top: 15px; 
            cursor: pointer; 
            font-size: 18px; 
            font-weight: bold; 
            border-radius: 5px; 
            transition: 0.3s; 
        }
        .btn:hover { 
            background-color: #ffd700; 
        }
        .btn-pix {
            background-color: #32bbad;
            color: white;
        }
        .btn-link {
            background-color: #007bff;
            color: white;
        }
        input, textarea { 
            width: 100%; 
            padding: 12px; 
            margin: 12px 0; 
            border: 2px solid yellow; 
            border-radius: 5px; 
            font-size: 16px; 
            background: #222; 
            color: white; 
        }
        .qr-code { 
            display: none; 
            margin-top: 20px; 
        }
        .qr-code img { 
            width: 200px; 
            border: 2px solid yellow; 
            border-radius: 10px; 
            padding: 5px; 
            background: #333; 
        }
        .clima-container, .comprovante-container { 
            background: #222; 
            padding: 20px; 
            border-radius: 5px; 
            margin-top: 40px; 
            border: 2px solid yellow;
        }
        .preview {
            max-width: 100%;
            margin: 15px 0;
            border-radius: 5px;
            border: 2px solid yellow;
            padding: 5px;
            background: #333;
            display: none;
        }
        .file-input-container {
            position: relative;
            margin: 15px 0;
        }
        .upload-status {
            color: yellow;
            margin-top: 10px;
            font-size: 14px;
        }
        .pix-container {
            display: none;
            margin-top: 20px;
            text-align: left;
            padding: 15px;
            background: #333;
            border-radius: 10px;
            border: 2px solid yellow;
        }
        .pix-container img {
            width: 100%;
            max-width: 300px;
            display: block;
            margin: 15px auto;
            border-radius: 10px;
        }
        .pix-container p {
            margin: 10px 0;
            font-size: 16px;
            color: yellow;
        }
        footer { 
            margin-top: 40px; 
            font-size: 14px; 
            color: yellow; 
        }
        @media (max-width: 600px) { 
            .container { 
                width: 95%; 
            } 
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>üõú Bem-vindo ao Wi-Fi Premium</h2>
        <p>üöÄ Escolha um plano abaixo e fa√ßa o pagamento para obter acesso.</p>

        <!-- Se√ß√£o de Planos -->
        <div>
            <h3>üíº Escolha seu Plano:</h3>
            <button class="btn" onclick="mostrarPlano('plano1')">üì° Plano B√°sico - 1h</button>
            <button class="btn" onclick="mostrarPlano('plano2')">‚ö° Plano Intermedi√°rio - 3h</button>
            <button class="btn" onclick="mostrarPlano('plano3')">üöÄ Plano Premium - Ilimitado</button>
        </div>

        <!-- QR Codes dos Planos com Imagens Hospedadas no ImgBB -->
        <div id="plano1" class="qr-code">
            <img src="https://i.ibb.co/cXwY2xH/qrcode-plano1.png" alt="Plano B√°sico">
            <button class="btn btn-link" onclick="pagarComLink('https://loja.com/plano1')">üí≥ Pagar com Link</button>
            <button class="btn btn-pix" onclick="mostrarPix('plano1')">üì≤ Pagar com PIX</button>
            <div id="pix-plano1" class="pix-container">
                <p>Chave PIX: <strong>123.456.789-00</strong></p>
                <img src="https://i.ibb.co/cXwY2xH/qrcode-plano1.png" alt="QR Code PIX Plano B√°sico">
            </div>
        </div>
        <div id="plano2" class="qr-code">
            <img src="https://i.ibb.co/cXwY2xH/qrcode-plano2.png" alt="Plano Intermedi√°rio">
            <button class="btn btn-link" onclick="pagarComLink('https://loja.com/plano2')">üí≥ Pagar com Link</button>
            <button class="btn btn-pix" onclick="mostrarPix('plano2')">üì≤ Pagar com PIX</button>
            <div id="pix-plano2" class="pix-container">
                <p>Chave PIX: <strong>123.456.789-00</strong></p>
                <img src="https://i.ibb.co/cXwY2xH/qrcode-plano2.png" alt="QR Code PIX Plano Intermedi√°rio">
            </div>
        </div>
        <div id="plano3" class="qr-code">
            <img src="https://i.ibb.co/cXwY2xH/qrcode-plano3.png" alt="Plano Premium">
            <button class="btn btn-link" onclick="pagarComLink('https://loja.com/plano3')">üí≥ Pagar com Link</button>
            <button class="btn btn-pix" onclick="mostrarPix('plano3')">üì≤ Pagar com PIX</button>
            <div id="pix-plano3" class="pix-container">
                <p>Chave PIX: <strong>123.456.789-00</strong></p>
                <img src="https://i.ibb.co/cXwY2xH/qrcode-plano3.png" alt="QR Code PIX Plano Premium">
            </div>
        </div>

        <!-- Se√ß√£o Clima -->
        <div class="clima-container">
            <h3>üå¶Ô∏è Consulte o Clima</h3>
            <input type="text" id="cidade" placeholder="üåç Digite sua cidade">
            <button class="btn" onclick="buscarClima()">üîé Buscar</button>
            <div id="info-clima" style="font-size: 18px; margin-top: 10px;"></div>
        </div>

        <!-- Se√ß√£o Comprovante -->
        <div class="comprovante-container">
            <h3>üí≥ Enviar Comprovante</h3>
            <input type="text" id="nome" placeholder="üë§ Nome Completo" required>
            <input type="email" id="email" placeholder="üìß E-mail" required>
            <input type="tel" id="telefone" placeholder="üìû WhatsApp" required>
            <input type="text" id="dados-pagamento" placeholder="üí∞ Dados do Pagamento (Opcional)">
            
            <div class="file-input-container">
                <label for="comprovante">üìé Anexar Comprovante (Opcional):</label>
                <input type="file" id="comprovante" accept="image/*" onchange="previewImagem()">
                <div class="upload-status" id="uploadStatus"></div>
            </div>

            <img id="preview" class="preview" alt="Pr√©-visualiza√ß√£o do comprovante">
            
            <button class="btn" onclick="enviarWhatsApp()">
                <i class="fa-brands fa-whatsapp"></i> Enviar para WhatsApp
            </button>
        </div>
    </div>

    <footer>
        <p>üîß Desenvolvido por <b>Jo√£o Ricardo</b>. Instagram: <a href="https://www.instagram.com/joaoricardo.pe">@joaoricardo.pe</a></p>
    </footer>

    <script>
        // Fun√ß√µes do Sistema
        function mostrarPlano(plano) {
            document.querySelectorAll('.qr-code').forEach(qr => qr.style.display = 'none');
            document.getElementById(plano).style.display = 'block';
        }

        function pagarComLink(link) {
            window.open(link, '_blank');
        }

        function mostrarPix(plano) {
            const pixSection = document.getElementById(`pix-${plano}`);
            pixSection.style.display = pixSection.style.display === 'none' ? 'block' : 'none';
        }

        async function buscarClima() {
            const cidade = document.getElementById("cidade").value;
            if (!cidade) {
                document.getElementById("info-clima").innerText = "Por favor, insira o nome da cidade.";
                return;
            }
            
            try {
                const response = await fetch(`https://wttr.in/${cidade}?format=%C+üå°Ô∏è+%t+üíß+%h+üå¨Ô∏è+%w`);
                const data = await response.text();
                document.getElementById("info-clima").innerHTML = `üå¶Ô∏è Clima em ${cidade}: ${data}`;
            } catch {
                document.getElementById("info-clima").innerText = "Erro ao buscar clima.";
            }
        }

        // Upload de Imagem Autom√°tico
        async function uploadImagem(file) {
            const formData = new FormData();
            formData.append('image', file);
            
            try {
                const response = await fetch('https://api.imgbb.com/1/upload?expiration=600&key=e581ff8b2b285acd57c9108ea99b14fb', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                return data.data.url; // Retorna o link direto da imagem
            } catch (error) {
                console.error('Erro no upload:', error);
                return null;
            }
        }

        // Preview e Upload de Imagem
        async function previewImagem() {
            const fileInput = document.getElementById('comprovante');
            const file = fileInput.files[0];
            const preview = document.getElementById('preview');
            const uploadStatus = document.getElementById('uploadStatus');

            if (file) {
                preview.style.display = 'block';
                preview.src = URL.createObjectURL(file);
                
                uploadStatus.textContent = 'Enviando imagem...';
                const imageUrl = await uploadImagem(file);
                if (imageUrl) {
                    uploadStatus.textContent = '‚úîÔ∏è Imagem enviada!';
                    preview.dataset.uploadedUrl = imageUrl; // Armazena o link da imagem
                } else {
                    uploadStatus.textContent = '‚ùå Erro no envio';
                }
            }
        }

        // Envio para WhatsApp
        async function enviarWhatsApp() {
            const nome = document.getElementById('nome').value;
            const email = document.getElementById('email').value;
            const telefone = document.getElementById('telefone').value.replace(/\D/g, '');
            const dadosPagamento = document.getElementById('dados-pagamento').value;
            const imageUrl = document.getElementById('preview').dataset.uploadedUrl;
            const planoElement = document.querySelector('.qr-code[style="display: block;"]');
            const plano = planoElement ? planoElement.querySelector('img').alt : 'Plano n√£o selecionado';

            if (!nome || !telefone || !email) {
                alert('Por favor, preencha pelo menos nome, e-mail e telefone!');
                return;
            }

            let mensagem = `*üì∂ Solicita√ß√£o de Libera√ß√£o Wi-Fi Premium*\n\n`;
            mensagem += `üë§ *Nome:* ${nome}\n`;
            mensagem += `üìß *E-mail:* ${email}\n`;
            mensagem += `üìû *Telefone:* ${telefone}\n`;
            mensagem += `üì° *Plano Escolhido:* ${plano}\n`;
            if (dadosPagamento) mensagem += `üí∞ *Detalhes Pagamento:* ${dadosPagamento}\n`;
            if (imageUrl) {
                mensagem += `\nüìé *Comprovante:* ${imageUrl}\n`;
                mensagem += `üîó *Link para Download:* ${imageUrl}`;
            }

            const url = `https://wa.me/55${telefone}?text=${encodeURIComponent(mensagem)}`;
            window.open(url, '_blank');
        }
    </script>

</body>
</html>
